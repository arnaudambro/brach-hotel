//https://github.com/airbnb/lottie-web


const animationData = {"v":"5.0.5","fr":25,"ip":0,"op":201,"w":1366,"h":768,"nm":"maquette_V3PROPOSITION_1 copie","ddd":0,"assets":[{"id":"image_0","w":11,"h":6,"u":"./src/img/animation/","p":"img_0.svg"},{"id":"image_1","w":112,"h":68,"u":"./src/img/animation/","p":"img_1.svg"},{"id":"image_2","w":72,"h":66,"u":"./src/img/animation/","p":"img_2.svg"},{"id":"image_3","w":63,"h":67,"u":"./src/img/animation/","p":"img_3.svg"},{"id":"image_4","w":54,"h":67,"u":"./src/img/animation/","p":"img_4.svg"},{"id":"image_5","w":58,"h":67,"u":"./src/img/animation/","p":"img_5.svg"},{"id":"image_6","w":1366,"h":768,"u":"./src/img/animation/","p":"img_6.svg"}],"layers":[{"ddd":0,"ind":1,"ty":2,"nm":"Calque 9","refId":"image_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[700.482,130.83,0],"ix":2},"a":{"a":0,"k":[5.475,2.691,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"n":["0p667_1_1_0","0p667_1_1_0","0p667_1_0p333_0"],"t":105,"s":[0,0,100],"e":[152,152,100]},{"t":110}],"ix":6}},"ao":0,"ip":105,"op":750,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":2,"nm":"Calque 6","refId":"image_1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":1,"y":0},"n":"0p833_0p833_1_0","t":0,"s":[651.123,-18.75,0],"e":[651.123,641.091,0],"to":[0,109.973579406738,0],"ti":[0,-109.973579406738,0]},{"t":15}],"ix":2},"a":{"a":0,"k":[34.888,66.401,0],"ix":1},"s":{"a":0,"k":[152,152,100],"ix":6}},"ao":0,"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":2,"nm":"Calque 8","parent":2,"refId":"image_2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":1,"y":0},"n":"0p833_0p833_1_0","t":15,"s":[36.229,-366.894,0],"e":[36.229,1.392,0],"to":[0,61.3809394836426,0],"ti":[0,-61.3809394836426,0]},{"t":30}],"ix":2},"a":{"a":0,"k":[37.229,66.213,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":15,"op":765,"st":15,"bm":0},{"ddd":0,"ind":6,"ty":2,"nm":"Calque 5","parent":4,"refId":"image_3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":1,"y":0},"n":"0p833_0p833_1_0","t":30,"s":[39.174,-301.74,0],"e":[39.174,0.559,0],"to":[0,50.3831405639648,0],"ti":[0,-50.3831405639648,0]},{"t":45}],"ix":2},"a":{"a":0,"k":[31.189,67.046,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":30,"op":780,"st":30,"bm":0},{"ddd":0,"ind":8,"ty":2,"nm":"Calque 4","parent":6,"refId":"image_4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":1,"y":0},"n":"0p833_0p833_1_0","t":45,"s":[29.287,-236.765,0],"e":[29.287,-0.559,0],"to":[0,39.3676071166992,0],"ti":[0,-39.3676071166992,0]},{"t":60}],"ix":2},"a":{"a":0,"k":[36.862,65.534,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":45,"op":795,"st":45,"bm":0},{"ddd":0,"ind":9,"ty":2,"nm":"Calque 7","parent":8,"refId":"image_5","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":1,"y":0},"n":"0p833_0p833_1_0","t":60,"s":[41.613,-169.182,0],"e":[41.613,0.581,0],"to":[0,28.2937049865723,0],"ti":[0,-28.2937049865723,0]},{"t":75}],"ix":2},"a":{"a":0,"k":[23.57,67.024,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":60,"op":810,"st":60,"bm":0},{"ddd":0,"ind":10,"ty":2,"nm":"Rectangle 8","refId":"image_6","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[683,384,0],"ix":2},"a":{"a":0,"k":[683,384,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"a","pt":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[-9,-3],[1372,-3],[1372,768],[-9,768]],"c":true},"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"Masque 1"}],"ip":0,"op":750,"st":0,"bm":0}],"markers":[]};

let notOverYet = false;
const startDate = Date.now();
const animDiv = document.querySelector('#loadingAnim');
const animation = lottie.loadAnimation({
    container: animDiv,
    renderer: 'svg',
    loop: false,
    autoplay: false,
    animationData: animationData
  });


window.addEventListener('load', start);

function start () {
    console.log(`everything motherfucking loaded in ${startDate - Date.now()}!`)
    animation.play();
    animation.setSpeed(2);
}

// animation.addEventListener('loaded_images', function(e) {
//   console.log(`everything motherfucking loaded in ${startDate - Date.now()}!`)
//   notOverYet = true;
//   animation.play()
//   animation.setSpeed(2);
//   // window.setTimeout(() => {
    // var script = document.createElement('script');
    // script.src = "./_build/bundle.js";
    // document.getElementsByTagName('head')[0].appendChild(script);
//   // }, 1500);
// });

animation.addEventListener('complete', function(e) {
  console.log('stop it baby');
  animDiv.classList.add('hide');
  window.setTimeout(() => {
    animation.destroy();
    document.body.removeChild(animDiv);
  }, 2000);
});

